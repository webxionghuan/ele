{"remainingRequest":"e:\\练习\\第四阶段 小程序\\Vue-ui\\Vue-ul\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!e:\\练习\\第四阶段 小程序\\Vue-ui\\Vue-ul\\vue_app_00\\src\\components\\home\\ShopCart.vue?vue&type=style&index=0&lang=css","dependencies":[{"path":"e:\\练习\\第四阶段 小程序\\Vue-ui\\Vue-ul\\vue_app_00\\src\\components\\home\\ShopCart.vue","mtime":1552383275366},{"path":"e:\\练习\\第四阶段 小程序\\Vue-ui\\Vue-ul\\vue_app_00\\node_modules\\css-loader\\index.js","mtime":499162500000},{"path":"e:\\练习\\第四阶段 小程序\\Vue-ui\\Vue-ul\\vue_app_00\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1521907988000},{"path":"e:\\练习\\第四阶段 小程序\\Vue-ui\\Vue-ul\\vue_app_00\\node_modules\\postcss-loader\\lib\\index.js","mtime":499162500000},{"path":"e:\\练习\\第四阶段 小程序\\Vue-ui\\Vue-ul\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"e:\\练习\\第四阶段 小程序\\Vue-ui\\Vue-ul\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ninput:hover{\n    background-color:red !important ; \n}\n",{"version":3,"sources":["ShopCart.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAoLA;AACA;AACA","file":"ShopCart.vue","sourceRoot":"src\\components\\home","sourcesContent":["<template>\r\n    <div class=\"app-shopcart\">\r\n       <div class=\"mui-card\">\r\n            <div class=\"mui-card-header\">\r\n                全选\r\n                <input type=\"checkbox\" @click=\"selectAll\" :checked=\"allcb\">\r\n            </div>\r\n            <div class=\"mui-card-content\">\r\n                <div class=\"mui-card-content-inner\">\r\n                   <!--商品信息开始-->\r\n                    <ul class=\"mui-table-view\">\r\n                        <li class=\"mui-table-view-cell mui-media\" v-for=\"(item,i) of list\">\r\n                            <a href=\"javascript:;\">\r\n                                <img class=\"mui-media-object mui-pull-left\" src=\"\">\r\n                                <div class=\"mui-media-body\">\r\n                                <p class='mui-ellipsis'>\r\n                                    <!--商品复选框-->\r\n                                     <input type=\"checkbox\" :data-id=\"item.id\" :checked=\"item.cb\" :data-i=\"i\" @click=\"modifyItem\">\r\n                                     <!---->\r\n                                    {{item.pname}}\r\n                                    {{item.price}}\r\n                                    <input type=\"button\" value=\"删除\" :data-id=\"item.id\" :data-idx=\"i\" @click=\"removeItem\">\r\n                                </p>\r\n                                </div>\r\n                            </a>\r\n                        </li>\r\n                    </ul>\r\n                   <!--商品信息结束-->\r\n                </div>\r\n            </div>\r\n            <div class=\"mui-card-footer\">\r\n                <input type=\"button\" value=\"删除选中的商品\" @click=\"delItem\" >\r\n            </div>\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {Toast} from \"mint-ui\"\r\nexport default {\r\n    data(){\r\n        return {\r\n            list:[],\r\n            allcb:false,//全选的状态\r\n        }\r\n    },\r\n    created(){\r\n        this.loadMore();\r\n    },\r\n    methods:{\r\n        loadMore(){\r\n            //1：创建url地址\r\n            var url=\"http://127.0.0.1:3000/getShopCart\";\r\n            //2：发送ajax请求\r\n            this.axios.get(url).then(result=>{\r\n                //3：获取返回数据\r\n                //4:保存list\r\n                //this.list=result.data.data;\r\n                //5:循环显示\r\n                //6:获取返回的数组\r\n                var rows = result.data.data;\r\n                //7:为数组中每个对象添加属性Cb初始值为false\r\n                for(var item of rows){\r\n                    item.cb=false;\r\n                }\r\n                //8:将数据保存list中\r\n                this.list=rows;\r\n                console.log(this.list);\r\n            })\r\n        },\r\n        removeItem(e){\r\n            //1:获取购物车商品id\r\n            var id=e.target.dataset.id;\r\n            var idx=e.target.dataset.idx;\r\n            console.log(id);\r\n            //2:创建url\r\n            var url=\"http://127.0.0.1:3000/removeItem\";\r\n            var postData=this.qs.stringify({\r\n                   id:id\r\n                });\r\n            // //3:发送ajax请求\r\n             this.axios.post(url,postData).then(result=>{\r\n                //4:获取返回结果\r\n                //5:提示删除结果\r\n                if(result.data.code==1){\r\n                    //删除对应数据中的值\r\n                    //1:获取下标\r\n                    //2:依据下标删除指定数组商品\r\n                    //删除数组中对应下标商品\r\n                    //splice(数组下标，个数)\r\n                    this.list.splice(idx,1);\r\n                    Toast(\"删除成功\")\r\n                }else{\r\n                    Toast(\"删除失败\");\r\n                }\r\n                //6:list对应商品项删除？\r\n\r\n            })\r\n            \r\n        },\r\n        //多选删除按钮,删除选中的多个商品\r\n        delItem(){\r\n            //1：创建空字符串\r\n            var html=\"\";\r\n            //2：遍历数据中的元素\r\n            for(var item of this.list){\r\n            //3：判断cb==true\r\n                if(item.cb){\r\n                //4：保存id拼接字符串\r\n                    html += item.id+\",\";\r\n                }\r\n            }\r\n            \r\n             //5:截取字符串去除最后\r\n             html = html.substring(0,html.length-1);\r\n             if(html.length==0){\r\n                 Toast(\"请选中您需要删除商品！\")\r\n                 return;\r\n             }\r\n            //6:发送ajax请求\r\n            var url=\"http://127.0.0.1:3000/removeMItem?ids=\"+html;\r\n            this.axios.get(url).then(result=>{\r\n                 //7:获取返回数据提示  删除成功或者失败\r\n                 if(result.data.code==1){\r\n                     Toast(\"删除成功\");\r\n                     this.loadMore();\r\n                 }else{\r\n                     Toast(\"删除失败\");\r\n                 }\r\n            })\r\n           \r\n        },\r\n        modifyItem(e){\r\n            //1.获取当前元素的选中状态 true false\r\n            var rs = e.target.checked;\r\n            //2.当前元素在数组的下标\r\n             var i=e.target.dataset.i;\r\n             //console.log(rs+\":\"+i);\r\n            //3.将状态赋值当前数组下标中对象cb值\r\n            this.list[i].cb=rs;\r\n            //console.log(this.list);\r\n\r\n            // 判断全选复选框状态\r\n            // 1:获取数组个数\r\n            var size1=this.list.length;\r\n            // 2:计算数组中cb  true   元素个数\r\n            var count = 0;\r\n            for(var item of this.list){\r\n                if(item.cb){\r\n                    count++;\r\n                }\r\n            }\r\n            //console.log(size1+\":\"+count);\r\n            // 3:数组个数==cb  true  个数[累加和]\r\n            if(count == size1){\r\n                this.allcb=true;\r\n            }else{\r\n                this.allcb=false;\r\n            }\r\n            // 4:将allcb = true\r\n\r\n            // 5:否则 allcb= false\r\n\r\n        },\r\n        //全选按钮，选中所有商品选中，清除状态，所有商品清除\r\n        selectAll(e){\r\n        //1:获取全选按钮选中状态\r\n            var rs=e.target.checked;\r\n            //2:遍历数组所有元素\r\n            for(var item of this.list){\r\n                //3:item.cb=全选按钮\r\n                item.cb=rs;\r\n            }\r\n            this.allcb=rs;\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    input:hover{\r\n        background-color:red !important ; \r\n    }\r\n</style>\r\n\r\n"]}]}