{"remainingRequest":"e:\\练习\\第四阶段 小程序\\Vue-ul\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js!e:\\练习\\第四阶段 小程序\\Vue-ul\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!e:\\练习\\第四阶段 小程序\\Vue-ul\\vue_app_00\\src\\components\\home\\ShopCart.vue?vue&type=script&lang=js","dependencies":[{"path":"e:\\练习\\第四阶段 小程序\\Vue-ul\\vue_app_00\\src\\components\\home\\ShopCart.vue","mtime":1552376276873},{"path":"e:\\练习\\第四阶段 小程序\\Vue-ul\\vue_app_00\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1534853416000},{"path":"e:\\练习\\第四阶段 小程序\\Vue-ul\\vue_app_00\\node_modules\\babel-loader\\lib\\index.js","mtime":1529635966000},{"path":"e:\\练习\\第四阶段 小程序\\Vue-ul\\vue_app_00\\node_modules\\vue-loader\\lib\\index.js","mtime":1527860006000}],"contextDependencies":[],"result":["import \"core-js/modules/es7.symbol.async-iterator\";\nimport \"core-js/modules/es6.symbol\";\nimport \"core-js/modules/web.dom.iterable\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nimport { Toast } from \"mint-ui\";\nexport default {\n  data: function data() {\n    return {\n      list: []\n    };\n  },\n  created: function created() {\n    this.loadMore();\n  },\n  methods: {\n    loadMore: function loadMore() {\n      var _this = this;\n\n      //1：创建url地址\n      var url = \"http://127.0.0.1:3000/getShopCart\"; //2：发送ajax请求\n\n      this.axios.get(url).then(function (result) {\n        //3：获取返回数据\n        //4:保存list\n        //this.list=result.data.data;\n        //5:循环显示\n        //6:获取返回的数组\n        var rows = result.data.data; //7:为数组中每个对象添加属性Cb初始值为false\n\n        var _iteratorNormalCompletion = true;\n        var _didIteratorError = false;\n        var _iteratorError = undefined;\n\n        try {\n          for (var _iterator = rows[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n            var item = _step.value;\n            item.cb = false;\n          } //8:将数据保存list中\n\n        } catch (err) {\n          _didIteratorError = true;\n          _iteratorError = err;\n        } finally {\n          try {\n            if (!_iteratorNormalCompletion && _iterator.return != null) {\n              _iterator.return();\n            }\n          } finally {\n            if (_didIteratorError) {\n              throw _iteratorError;\n            }\n          }\n        }\n\n        _this.list = rows;\n        console.log(_this.list);\n      });\n    },\n    removeItem: function removeItem(e) {\n      var _this2 = this;\n\n      //1:获取购物车商品id\n      var id = e.target.dataset.id;\n      var idx = e.target.dataset.idx;\n      console.log(id); //2:创建url\n\n      var url = \"http://127.0.0.1:3000/removeItem\";\n      var postData = this.qs.stringify({\n        id: id\n      }); // //3:发送ajax请求\n\n      this.axios.post(url, postData).then(function (result) {\n        //4:获取返回结果\n        //5:提示删除结果\n        if (result.data.code == 1) {\n          //删除对应数据中的值\n          //1:获取下标\n          //2:依据下标删除指定数组商品\n          //删除数组中对应下标商品\n          //splice(数组下标，个数)\n          _this2.list.splice(idx, 1);\n\n          Toast(\"删除成功\");\n        } else {\n          Toast(\"删除失败\");\n        } //6:list对应商品项删除？\n\n      });\n    },\n    //多选删除按钮,删除选中的多个商品\n    delItem: function delItem() {\n      var _this3 = this;\n\n      //1：创建空字符串\n      var html = \"\"; //2：遍历数据中的元素\n\n      var _iteratorNormalCompletion2 = true;\n      var _didIteratorError2 = false;\n      var _iteratorError2 = undefined;\n\n      try {\n        for (var _iterator2 = this.list[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n          var item = _step2.value;\n\n          //3：判断cb==true\n          if (item.cb) {\n            //4：保存id拼接字符串\n            html += item.id + \",\";\n          }\n        } //5:截取字符串去除最后\n\n      } catch (err) {\n        _didIteratorError2 = true;\n        _iteratorError2 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion2 && _iterator2.return != null) {\n            _iterator2.return();\n          }\n        } finally {\n          if (_didIteratorError2) {\n            throw _iteratorError2;\n          }\n        }\n      }\n\n      html = html.substring(0, html.length - 1);\n\n      if (html.length == 0) {\n        Toast(\"请选中您需要删除商品！\");\n        return;\n      } //6:发送ajax请求\n\n\n      var url = \"http://127.0.0.1:3000/removeMItem?ids=\" + html;\n      this.axios.get(url).then(function (result) {\n        //7:获取返回数据提示  删除成功或者失败\n        if (result.data.code == 1) {\n          Toast(\"删除成功\");\n\n          _this3.loadMore();\n        } else {\n          Toast(\"删除失败\");\n        }\n      });\n    },\n    modifyItem: function modifyItem(e) {\n      //1.获取当前元素的选中状态 true false\n      var rs = e.target.checked; //2.当前元素在数组的下标\n\n      var i = e.target.dataset.i; //console.log(rs+\":\"+i);\n      //3.将状态赋值当前数组下标中对象cb值\n\n      this.list[i].cb = rs; //console.log(this.list);\n    },\n    //全选按钮，选中所有商品选中，清除状态，所有商品清除\n    selectAll: function selectAll(e) {\n      //1:获取全选按钮选中状态\n      var rs = e.target.checked; //2:遍历数组所有元素\n\n      var _iteratorNormalCompletion3 = true;\n      var _didIteratorError3 = false;\n      var _iteratorError3 = undefined;\n\n      try {\n        for (var _iterator3 = this.list[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n          var item = _step3.value;\n          item.cb = rs;\n        } //3:item.cb=全选按钮\n\n      } catch (err) {\n        _didIteratorError3 = true;\n        _iteratorError3 = err;\n      } finally {\n        try {\n          if (!_iteratorNormalCompletion3 && _iterator3.return != null) {\n            _iterator3.return();\n          }\n        } finally {\n          if (_didIteratorError3) {\n            throw _iteratorError3;\n          }\n        }\n      }\n    }\n  }\n};",{"version":3,"sources":["ShopCart.vue"],"names":[],"mappings":"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","sourcesContent":["<template>\r\n    <div class=\"app-shopcart\">\r\n       <div class=\"mui-card\">\r\n            <div class=\"mui-card-header\">\r\n                全选\r\n                <input type=\"checkbox\" @click=\"selectAll\">\r\n            </div>\r\n            <div class=\"mui-card-content\">\r\n                <div class=\"mui-card-content-inner\">\r\n                   <!--商品信息开始-->\r\n                    <ul class=\"mui-table-view\">\r\n                        <li class=\"mui-table-view-cell mui-media\" v-for=\"(item,i) of list\">\r\n                            <a href=\"javascript:;\">\r\n                                <img class=\"mui-media-object mui-pull-left\" src=\"\">\r\n                                <div class=\"mui-media-body\">\r\n                                <p class='mui-ellipsis'>\r\n                                    <!--商品复选框-->\r\n                                     <input type=\"checkbox\" :data-id=\"item.id\" :checked=\"item.cb\" :data-i=\"i\" @click=\"modifyItem\">\r\n                                     <!---->\r\n                                    {{item.pname}}\r\n                                    {{item.price}}\r\n                                    <input type=\"button\" value=\"删除\" :data-id=\"item.id\" :data-idx=\"i\" @click=\"removeItem\">\r\n                                </p>\r\n                                </div>\r\n                            </a>\r\n                        </li>\r\n                    </ul>\r\n                   <!--商品信息结束-->\r\n                </div>\r\n            </div>\r\n            <div class=\"mui-card-footer\">\r\n                <input type=\"button\" value=\"删除选中的商品\" @click=\"delItem\" >\r\n            </div>\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {Toast} from \"mint-ui\"\r\nexport default {\r\n    data(){\r\n        return {\r\n            list:[],\r\n        }\r\n    },\r\n    created(){\r\n        this.loadMore();\r\n    },\r\n    methods:{\r\n        loadMore(){\r\n            //1：创建url地址\r\n            var url=\"http://127.0.0.1:3000/getShopCart\";\r\n            //2：发送ajax请求\r\n            this.axios.get(url).then(result=>{\r\n                //3：获取返回数据\r\n                //4:保存list\r\n                //this.list=result.data.data;\r\n                //5:循环显示\r\n                //6:获取返回的数组\r\n                var rows = result.data.data;\r\n                //7:为数组中每个对象添加属性Cb初始值为false\r\n                for(var item of rows){\r\n                    item.cb=false;\r\n                }\r\n                //8:将数据保存list中\r\n                this.list=rows;\r\n                console.log(this.list);\r\n            })\r\n        },\r\n        removeItem(e){\r\n            //1:获取购物车商品id\r\n            var id=e.target.dataset.id;\r\n            var idx=e.target.dataset.idx;\r\n            console.log(id);\r\n            //2:创建url\r\n            var url=\"http://127.0.0.1:3000/removeItem\";\r\n            var postData=this.qs.stringify({\r\n                   id:id\r\n                });\r\n            // //3:发送ajax请求\r\n             this.axios.post(url,postData).then(result=>{\r\n                //4:获取返回结果\r\n                //5:提示删除结果\r\n                if(result.data.code==1){\r\n                    //删除对应数据中的值\r\n                    //1:获取下标\r\n                    //2:依据下标删除指定数组商品\r\n                    //删除数组中对应下标商品\r\n                    //splice(数组下标，个数)\r\n                    this.list.splice(idx,1);\r\n                    Toast(\"删除成功\")\r\n                }else{\r\n                    Toast(\"删除失败\");\r\n                }\r\n                //6:list对应商品项删除？\r\n\r\n            })\r\n            \r\n        },\r\n        //多选删除按钮,删除选中的多个商品\r\n        delItem(){\r\n            //1：创建空字符串\r\n            var html=\"\";\r\n            //2：遍历数据中的元素\r\n            for(var item of this.list){\r\n            //3：判断cb==true\r\n                if(item.cb){\r\n                //4：保存id拼接字符串\r\n                    html += item.id+\",\";\r\n                }\r\n            }\r\n            \r\n             //5:截取字符串去除最后\r\n             html = html.substring(0,html.length-1);\r\n             if(html.length==0){\r\n                 Toast(\"请选中您需要删除商品！\")\r\n                 return;\r\n             }\r\n            //6:发送ajax请求\r\n            var url=\"http://127.0.0.1:3000/removeMItem?ids=\"+html;\r\n            this.axios.get(url).then(result=>{\r\n                 //7:获取返回数据提示  删除成功或者失败\r\n                 if(result.data.code==1){\r\n                     Toast(\"删除成功\");\r\n                     this.loadMore();\r\n                 }else{\r\n                     Toast(\"删除失败\");\r\n                 }\r\n            })\r\n           \r\n        },\r\n        modifyItem(e){\r\n            //1.获取当前元素的选中状态 true false\r\n            var rs = e.target.checked;\r\n            //2.当前元素在数组的下标\r\n             var i=e.target.dataset.i;\r\n             //console.log(rs+\":\"+i);\r\n            //3.将状态赋值当前数组下标中对象cb值\r\n            this.list[i].cb=rs;\r\n            //console.log(this.list);\r\n        },\r\n        //全选按钮，选中所有商品选中，清除状态，所有商品清除\r\n        selectAll(e){\r\n        //1:获取全选按钮选中状态\r\n        var rs=e.target.checked;\r\n        //2:遍历数组所有元素\r\n        for(var item of this.list){\r\n            item.cb=rs;\r\n        }\r\n        //3:item.cb=全选按钮\r\n\r\n        },\r\n    }\r\n}\r\n</script>\r\n\r\n<style>\r\n    input:hover{\r\n        background-color:red !important ; \r\n    }\r\n</style>\r\n\r\n"],"sourceRoot":"src\\components\\home"}]}